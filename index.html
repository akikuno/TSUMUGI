<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Visualization</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.30.2/cytoscape.min.js"></script>

    <link href='https://fonts.googleapis.com/css?family=Cabin' rel='stylesheet'>

    <style>
        body {
            font-family: 'Cabin';
        }

        /* Your CSS for layout and styles */
        #container {
            display: flex;
            width: 100%;
            height: 1000px;
        }

        #cy {
            flex: 3;
            /* 3 parts of the 3:1 ratio */
            height: 100%;
        }

        #tooltip {
            flex: 1;
            /* 1 part of the 3:1 ratio */
            background: #fff;
            /* White background */
            padding: 20px;
            border-radius: 5px;
            font-size: 20px;
            max-width: 100%;
            overflow: auto;
            border: 2px solid #333;
            /* Black border */
        }

        #tooltip::before {
            content: "MP term";
            display: block;
            font-weight: bold;
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
    <h1 style="text-align:center;">Phenotypic similarity gene network of 'Male Infertility'</h1>
    <p>Select Network layout:</p>
    <select id="layout-dropdown" style="width: 50%;">
        <option value="breadthfirst">Breadthfirst</option>
        <option value="circle">Circle</option>
        <option value="cose" selected>Cose</option>
        <option value="grid">Grid</option>
        <option value="random">Random</option>
        <option value="concentric">Concentric</option>
    </select>
    <div id="container">
        <div id="cy"></div>
        <div id="tooltip"></div>
    </div>

    <script>
        // Node and edge data with annotations
        var elements = [
            { data: { id: 'a', label: 'Node A', annotation: 'hoge' }, style: { width: 50, height: 50, 'background-color': 'rgb(255, 255, 0)' } },
            { data: { id: 'b', label: 'Node B', annotation: 'fuga' }, style: { width: 50, height: 50, 'background-color': 'rgb(255, 140, 0)' } },
            { data: { source: 'a', target: 'b', label: 'Edge from A to B', annotation: 'Foo' }, style: { width: 10 } }
        ];

        var cy = cytoscape({
            container: document.getElementById('cy'),
            elements: elements,
            style: [
                {
                    selector: 'node',
                    style: {
                        'label': 'data(label)',
                        'text-valign': 'center',
                        'text-halign': 'center',
                        'font-family': 'Cabin',
                    }
                },
                {
                    selector: 'edge',
                    style: {
                        'curve-style': 'bezier',
                        'label': 'data(label)',
                        'font-size': '10px',
                        'font-family': 'Cabin',
                        'text-rotation': 'autorotate'
                    }
                }
            ],
            layout: { name: 'cose' }  // Default layout
        });

        document.getElementById('layout-dropdown').addEventListener('change', function () {
            var layout = this.value;
            cy.layout({ name: layout }).run();
        });

        cy.on('mouseover', 'node, edge', function (event) {
            var data = event.target.data();
            var tooltipText = '';

            if (event.target.isNode()) {
                tooltipText = "Phenotypes of '" + data.label + "' KO: ・" + data.annotation;
            } else if (event.target.isEdge()) {
                var sourceNode = cy.getElementById(data.source).data('label');
                var targetNode = cy.getElementById(data.target).data('label');
                tooltipText = "Shared phenotypes of '" + sourceNode + "' and '" + targetNode + "': ・" + data.annotation;
            }

            document.getElementById('tooltip').innerText = tooltipText;
        });

        // Additional event listeners for other interactions
    </script>
</body>

</html>
